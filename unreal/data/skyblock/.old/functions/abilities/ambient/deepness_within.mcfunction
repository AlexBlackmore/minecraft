tag @p[advancements={skyblock:commands/ambient/deepness_within=true}] add deepness_within
tag @p[tag=deepness_within,nbt={Inventory:[{Slot:100b,tag:{Name:"Angler Boots"}},{Slot:101b,tag:{Name:"Angler Leggings"}},{Slot:102b,tag:{Name:"Angler Chestplate"}},{Slot:103b,tag:{Name:"Angler Helmet"}}]}] add angler_armor

attribute @p[tag=deepness_within] minecraft:generic.attack_damage modifier remove 24-2-78-47-41
attribute @p[tag=angler_armor] minecraft:generic.luck modifier add 24-2-78-47-41 "Deepness Within" 4 add

attribute @p[tag=deepness_within] minecraft:generic.max_health modifier remove 64-11-77-51-35
attribute @p[tag=angler_armor,level=1] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 2 add
attribute @p[tag=angler_armor,level=2] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 4 add
attribute @p[tag=angler_armor,level=3] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 6 add
attribute @p[tag=angler_armor,level=4] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 8 add
attribute @p[tag=angler_armor,level=5] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 10 add
attribute @p[tag=angler_armor,level=6] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 12 add
attribute @p[tag=angler_armor,level=7] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 14 add
attribute @p[tag=angler_armor,level=8] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 16 add
attribute @p[tag=angler_armor,level=9] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 18 add
attribute @p[tag=angler_armor,level=10] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 20 add
attribute @p[tag=angler_armor,level=11] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 22 add
attribute @p[tag=angler_armor,level=12] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 24 add
attribute @p[tag=angler_armor,level=13] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 26 add
attribute @p[tag=angler_armor,level=14] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 28 add
attribute @p[tag=angler_armor,level=15] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 30 add
attribute @p[tag=angler_armor,level=16] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 32 add
attribute @p[tag=angler_armor,level=17] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 34 add
attribute @p[tag=angler_armor,level=18] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 36 add
attribute @p[tag=angler_armor,level=19] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 38 add
attribute @p[tag=angler_armor,level=20] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 40 add
attribute @p[tag=angler_armor,level=21] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 42 add
attribute @p[tag=angler_armor,level=22] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 44 add
attribute @p[tag=angler_armor,level=23] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 46 add
attribute @p[tag=angler_armor,level=24] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 48 add
attribute @p[tag=angler_armor,level=25] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 50 add
attribute @p[tag=angler_armor,level=26] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 52 add
attribute @p[tag=angler_armor,level=27] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 54 add
attribute @p[tag=angler_armor,level=28] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 56 add
attribute @p[tag=angler_armor,level=29] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 58 add
attribute @p[tag=angler_armor,level=30] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 60 add
attribute @p[tag=angler_armor,level=31] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 62 add
attribute @p[tag=angler_armor,level=32] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 64 add
attribute @p[tag=angler_armor,level=33] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 66 add
attribute @p[tag=angler_armor,level=34] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 68 add
attribute @p[tag=angler_armor,level=35] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 70 add
attribute @p[tag=angler_armor,level=36] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 72 add
attribute @p[tag=angler_armor,level=37] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 74 add
attribute @p[tag=angler_armor,level=38] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 76 add
attribute @p[tag=angler_armor,level=39] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 78 add
attribute @p[tag=angler_armor,level=40] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 80 add
attribute @p[tag=angler_armor,level=41] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 82 add
attribute @p[tag=angler_armor,level=42] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 84 add
attribute @p[tag=angler_armor,level=43] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 86 add
attribute @p[tag=angler_armor,level=44] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 88 add
attribute @p[tag=angler_armor,level=45] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 90 add
attribute @p[tag=angler_armor,level=46] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 92 add
attribute @p[tag=angler_armor,level=47] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 94 add
attribute @p[tag=angler_armor,level=48] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 96 add
attribute @p[tag=angler_armor,level=49] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 98 add
attribute @p[tag=angler_armor,level=50..] minecraft:generic.max_health modifier add 64-11-77-51-35 "Deepness Within" 100 add

scoreboard objectives add xp_level dummy "XP Level"
execute as @p[tag=angler_armor] run execute store result score @s xp_level run data get entity @s XpLevel 2
tellraw @p[tag=angler_armor] ["",{"text":"[Deepness Within: +","italic":true,"color":"gray"},{"score":{"name":"*","objective":"xp_level"},"italic":true,"color":"gray"},{"text":" Max Health, +4 Luck]","italic":true,"color":"gray"}]
tellraw @p[tag=deepness_within,tag=!angler_armor] {"text":"[Deepness Within: +0 Max Health, +0 Luck]","italic":true,"color":"gray"}

advancement revoke @p[advancements={skyblock:commands/ambient/deepness_within=true},tag=!angler_armor] only skyblock:commands/ambient/deepness_within
execute if entity @p[tag=angler_armor] run schedule function skyblock:abilities/ambient/deepness_within 2s replace
tag @p[tag=deepness_within] remove deepness_within
tag @p[tag=angler_armor] remove angler_armor